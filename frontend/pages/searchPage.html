<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/frontend/global.css" />
  <link rel="stylesheet" href="/frontend/styles/custom-variables.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="/frontend/styles/search-page/search-page-style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flavorfolio</title>
</head>

<body id="body-search-page">
  <section class="search-body-container">
    <div class="app-name-logo-container">
      <span id="official-logo" class="material-symbols-outlined">soup_kitchen</span>
      <h1 class="app-name">Flavorfolio</h1>
    </div>
    <div class="search-bar">
      <input type="text" id="search-bar" placeholder="Search for recipes...">
      <button id="search-button">Search</button>
    </div>

    <div id="icon-menu">
      <span class="material-symbols-outlined" id="icon-home">home</span>
      <span class="material-symbols-outlined" id="icon-search">search</span>
      <span class="material-symbols-outlined" id="icon-favorite">favorite</span>
      <span class="material-symbols-outlined" id="icon-person">person</span>
    </div>
  </section>
  <script src="/scripts/carousel.js"></script>
  <script src="/scripts/openAnotherPages.js"></script>
<script>
  document.getElementById('search-button').addEventListener('click', async () => {
    const query = document.getElementById('search-bar').value.trim();
    if (!query) return;

    try {
        const response = await fetch(`http://localhost:3002/api/searchForRecipe?name=${encodeURIComponent(query)}`);
        const recipes = await response.json();

        if (recipes.length > 0) {
            // Assuming there's only one recipe that matches the search
            window.location.href = `/frontend/pages/recipePage.html?name=${encodeURIComponent(recipes[0].name)}`;
        } else {
            alert('No recipes found');
        }
    } catch (error) {
        console.error('Error searching for recipes:', error);
    }
});

</script>
</body>
</html>
